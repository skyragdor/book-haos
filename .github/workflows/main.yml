name: Daily Grass (6‚Äì10 random commits)

on:
  schedule:
    - cron: '0 9 * * *'      # —â–æ–¥–Ω—è –æ 9:00 UTC ‚Üí 11:00‚Äì12:00 –∑–∞ –ö–∏—î–≤–æ–º
  workflow_dispatch:

jobs:
  random-commits:
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      - uses: actions/checkout@v4

      - name: 6‚Äì10 random commits per day
        run: |
          # –ì–µ–Ω–µ—Ä—É—î–º–æ –≤–∏–ø–∞–¥–∫–æ–≤—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–æ–º—ñ—Ç—ñ–≤ –≤—ñ–¥ 6 –¥–æ 10
          COMMITS=$(( RANDOM % 5 + 6 ))
          echo "–°—å–æ–≥–æ–¥–Ω—ñ –±—É–¥–µ $COMMITS –∫–æ–º—ñ—Ç—ñ–≤"

          for i in $(seq 1 $COMMITS); do
            # –í–∏–ø–∞–¥–∫–æ–≤–∞ –∑–∞—Ç—Ä–∏–º–∫–∞ 5‚Äì45 —Å–µ–∫—É–Ω–¥ –º—ñ–∂ –∫–æ–º—ñ—Ç–∞–º–∏
            sleep $(( RANDOM % 41 + 5 ))

            # –ü–æ—Ç–æ—á–Ω–∏–π —á–∞—Å
            NOW=$(date '+%Y-%m-%d %H:%M:%S')

            # –ó–±—ñ–ª—å—à—É—î–º–æ –ª—ñ—á–∏–ª—å–Ω–∏–∫ –¥–Ω—ñ–≤ (–∑–∞–≥–∞–ª—å–Ω–∏–π)
            COUNTER=$(( $(cat counter.txt 2>/dev/null || echo 0) + 1 ))
            echo $COUNTER > counter.txt

            # –ó–∞–ø–∏—Å —É —Ç—Ä–∞–≤—É
            echo "$NOW ‚Äî –¥–µ–Ω—å $COUNTER (–∫–æ–º—ñ—Ç $i –∑ $COMMITS —Å—å–æ–≥–æ–¥–Ω—ñ) üå±" >> grass.md

            # –ö–æ–º—ñ—Ç —ñ –ø—É—à
            git config user.name "skyragdor"
            git config user.email "skyragdor@users.noreply.github.com"
            git add grass.md counter.txt
            git commit -m "daily grass $(date '+%Y-%m-%d') #$COUNTER [auto $i/$COMMITS]"
            git push

            echo "–ó—Ä–æ–±–ª–µ–Ω–æ –∫–æ–º—ñ—Ç $i –∑ $COMMITS"
          done

          echo "–ì–û–¢–û–í–û! –°—å–æ–≥–æ–¥–Ω—ñ –∑—Ä–æ–±–ª–µ–Ω–æ $COMMITS –∫–æ–º—ñ—Ç—ñ–≤ üåø"
